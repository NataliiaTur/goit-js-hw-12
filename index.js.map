{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["'use strict';\n\nimport axios from 'axios';\nimport iziToast from \"izitoast\";\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n    enableKeyboard: true, \n    closeOnClick: true,   \n    swipeClose: true  \n});\n\nexport function renderImages(images, galleryList) {\n    const markup = images.map(img => \n        `<li>\n            <div class=\"gallery\">\n                <a href=\"${img.largeImageURL}\">\n                    <img src=\"${img.largeImageURL}\" alt=\"${img.tags}\" title=\"${img.tags}\"/>\n                </a>\n            </div>\n            <div class=\"info\">\n                <p><b>Likes:</b> ${img.likes}</p>\n                <p><b>Views:</b> ${img.views}</p>\n                <p><b>Comments:</b> ${img.comments}</p>\n                <p><b>Downloads:</b> ${img.downloads}</p>\n            </div>\n        </li>`\n    ). join('');\n    \n    galleryList.insertAdjacentHTML('beforeend', markup);\n\n    lightbox.refresh();\n}\n\n\n\n","'use strict';\n\nimport axios from 'axios';\n\nimport { renderImages } from './render-functions.js';\n\nimport iziToast from \"izitoast\";\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport async function searchImg(query, galleryList, page, perPage) { \n    const API_KEY = '48820744-2d2f423ba9a206b8d884159e3';\n    const BASE_URL = 'https://pixabay.com/api/';\n\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page: page,\n                per_page: perPage\n            }\n        });\n\n        if(response.data.hits.length === 0) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topCenter'\n            });\n            return 0;\n        }\n        \n        renderImages(response.data.hits, galleryList);\n\n        return response.data.totalHits;\n\n    } catch (error) {\n        console.log(\"Помилка при запиті:\", error);\n        return 0;\n    }\n}","'use strict';\nimport axios from 'axios';\n\nimport {searchImg} from './js/pixabay-api.js';\nimport {renderImages} from './js/render-functions.js'\n\nimport iziToast from \"izitoast\";\nimport 'izitoast/dist/css/iziToast.min.css';\n\n\nconst form = document.querySelector('.form');\nconst galleryList = document.querySelector('.galleryList');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet page = 1;\nconst perPage = 40;\nlet totalHits = 0;\nlet currentQuery = '';\n\nfunction scrollAfterLoading() {\n    const firstCard = galleryList.querySelector(\"li\");\n\n    if (firstCard) {\n        const cardHeight = firstCard.getBoundingClientRect().height;\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: \"smooth\",\n        });\n    }\n}\n\n\nform.addEventListener('submit', async evt => {\n    evt.preventDefault();\n\n    galleryList.innerHTML = '';\n    page = 1; \n    loadMoreBtn.style.display = 'none';\n\n    currentQuery = form.elements.text.value.trim();\n\n    if (currentQuery === \"\") {\n        iziToast.error({\n            title: 'Error',\n            message: \"Поле пошуку не може бути порожнім!\",\n            position: 'topCenter',\n    });\n        return;\n    }\n\n    loader.style.display = 'inline-block';\n\n    totalHits = await searchImg(currentQuery, galleryList, page, perPage)\n\n    loader.style.display = 'none';\n\n    if (totalHits > perPage) {\n        loadMoreBtn.style.display = 'block';\n        loadMoreBtn.textContent = 'Load more';\n        galleryList.after(loadMoreBtn);\n    }\n\n    form.reset();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    page += 1;\n\n    loader.style.display = 'inline-block';\n\n    await searchImg(currentQuery, galleryList, page, perPage);\n\n    loader.style.display = 'none';\n    scrollAfterLoading();\n\n    if(page * perPage >= totalHits) {\n        loadMoreBtn.style.display = 'none';\n        iziToast.info({\n            title: 'Info',\n            message: 'We are sorry, but you have reached the end of search results.',\n            position: 'topCenter',\n        });\n    }\n});\n\n\n\n"],"names":["lightbox","SimpleLightbox","renderImages","images","galleryList","markup","img","searchImg","query","page","perPage","API_KEY","BASE_URL","response","axios","iziToast","error","form","loader","loadMoreBtn","totalHits","currentQuery","scrollAfterLoading","firstCard","cardHeight","evt"],"mappings":"owBASA,IAAIA,EAAW,IAAIC,EAAe,aAAc,CAC5C,aAAc,MACd,aAAc,IACd,eAAgB,GAChB,aAAc,GACd,WAAY,EAChB,CAAC,EAEM,SAASC,EAAaC,EAAQC,EAAa,CAC9C,MAAMC,EAASF,EAAO,IAAIG,GACtB;AAAA;AAAA,2BAEmBA,EAAI,aAAa;AAAA,gCACZA,EAAI,aAAa,UAAUA,EAAI,IAAI,YAAYA,EAAI,IAAI;AAAA;AAAA;AAAA;AAAA,mCAIpDA,EAAI,KAAK;AAAA,mCACTA,EAAI,KAAK;AAAA,sCACNA,EAAI,QAAQ;AAAA,uCACXA,EAAI,SAAS;AAAA;AAAA,cAGpD,EAAO,KAAK,EAAE,EAEVF,EAAY,mBAAmB,YAAaC,CAAM,EAElDL,EAAS,QAAS,CACtB,CC5BO,eAAeO,EAAUC,EAAOJ,EAAaK,EAAMC,EAAS,CAC/D,MAAMC,EAAU,qCACVC,EAAW,2BAEjB,GAAI,CACA,MAAMC,EAAW,MAAMC,EAAM,IAAIF,EAAU,CACvC,OAAQ,CACJ,IAAKD,EACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CAC1B,CACA,CAAS,EAED,OAAGG,EAAS,KAAK,KAAK,SAAW,GAC7BE,EAAS,MAAM,CACX,MAAO,QACP,QAAS,2EACT,SAAU,WAC1B,CAAa,EACM,IAGXb,EAAaW,EAAS,KAAK,KAAMT,CAAW,EAErCS,EAAS,KAAK,UAExB,OAAQG,EAAO,CACZ,eAAQ,IAAI,sBAAuBA,CAAK,EACjC,CACf,CACA,CCjCA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCb,EAAc,SAAS,cAAc,cAAc,EACnDc,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIV,EAAO,EACX,MAAMC,EAAU,GAChB,IAAIU,EAAY,EACZC,EAAe,GAEnB,SAASC,GAAqB,CAC1B,MAAMC,EAAYnB,EAAY,cAAc,IAAI,EAEhD,GAAImB,EAAW,CACX,MAAMC,EAAaD,EAAU,sBAAqB,EAAG,OACrD,OAAO,SAAS,CACZ,IAAKC,EAAa,EAClB,SAAU,QACtB,CAAS,CACT,CACA,CAGAP,EAAK,iBAAiB,SAAU,MAAMQ,GAAO,CASzC,GARAA,EAAI,eAAgB,EAEpBrB,EAAY,UAAY,GACxBK,EAAO,EACPU,EAAY,MAAM,QAAU,OAE5BE,EAAeJ,EAAK,SAAS,KAAK,MAAM,KAAM,EAE1CI,IAAiB,GAAI,CACrBN,EAAS,MAAM,CACX,MAAO,QACP,QAAS,qCACT,SAAU,WACtB,CAAK,EACG,MACR,CAEIG,EAAO,MAAM,QAAU,eAEvBE,EAAY,MAAMb,EAAUc,EAAcjB,EAAaK,EAAMC,CAAO,EAEpEQ,EAAO,MAAM,QAAU,OAEnBE,EAAYV,IACZS,EAAY,MAAM,QAAU,QAC5BA,EAAY,YAAc,YAC1Bf,EAAY,MAAMe,CAAW,GAGjCF,EAAK,MAAO,CAChB,CAAC,EAEDE,EAAY,iBAAiB,QAAS,SAAY,CAC9CV,GAAQ,EAERS,EAAO,MAAM,QAAU,eAEvB,MAAMX,EAAUc,EAAcjB,EAAaK,EAAMC,CAAO,EAExDQ,EAAO,MAAM,QAAU,OACvBI,EAAoB,EAEjBb,EAAOC,GAAWU,IACjBD,EAAY,MAAM,QAAU,OAC5BJ,EAAS,KAAK,CACV,MAAO,OACP,QAAS,gEACT,SAAU,WACtB,CAAS,EAET,CAAC"}